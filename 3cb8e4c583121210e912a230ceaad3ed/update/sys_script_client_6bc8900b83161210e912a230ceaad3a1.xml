<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description/>
        <field/>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>Update or Insert</name>
        <order/>
        <script><![CDATA[  function onSubmit() {

      var user = g_form.getValue('u_user');
      var type = g_form.getValue('course_type');
      var name = g_form.getValue('course_name');
      var rating = g_form.getValue('u_rating');
      var comment_for_course = g_form.getValue('comment_for_course');

      var originalOnbeforeUnload = top.window.originalonbeforeunload;
      top.window.onbeforeunload = null;

      // 发送 Ajax 请求到服务器端
      var ajax = new GlideAjax('updateOrInsert');
      ajax.addParam('sysparm_name', 'handleUpdateOrInsert');
      ajax.addParam('user', user);
      ajax.addParam('type', type);
      ajax.addParam('name', name);
      ajax.addParam('rating', rating);
      ajax.addParam('comment', comment_for_course);

      ajax.getXML(function(response) {

              clearAllFormFields();
          var result = response.responseXML.documentElement.getAttribute("answer");

          if (result == 'UPDATE') {

              //clear form data


              g_navigation.open('x_1557802_feedba_1_feedback_data_list.do?sysparm_query=active=true');
              //top.window.location.href = '/nav_to.do?uri=' + encodeURIComponent('x_1557802_feedba_1_feedback_data_list.do?ststem_query=active=true');

              //return false;
          } else if (result == 'INSERT') {

              g_navigation.open('x_1557802_feedba_1_feedback_data_list.do?sysparm_query=active=true');
              //return false;

          } else {
              top.window.onbeforeunload = originalOnbeforeUnload;
          }

      });

      function clearAllFormFields() {
    //           // var user = g_form.getValue('u_user');
	// 		  g_form.clearValue('u_user');
    //   //var type = g_form.getValue('course_type');
	// 		  g_form.clearValue('course_type');
    //  // var name = g_form.getValue('course_name');
	// 		  g_form.clearValue('course_name');
    //  // var rating = g_form.getValue('u_rating');
	// 		  g_form.clearValue('u_rating');
    //  // var comment_for_course = g_form.getValue('comment_for_course');
	// 		  g_form.clearValue('comment_for_course');
	g_form.clearAllFormFields=true;
          console.log("***********clearAllFormFields***");
      }

      return false;
  }]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-12-10 06:37:22</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>6bc8900b83161210e912a230ceaad3a1</sys_id>
        <sys_mod_count>65</sys_mod_count>
        <sys_name>Update or Insert</sys_name>
        <sys_overrides/>
        <sys_package display_value="Feedback Collection" source="x_1557802_feedba_1">3cb8e4c583121210e912a230ceaad3ed</sys_package>
        <sys_policy/>
        <sys_scope display_value="Feedback Collection">3cb8e4c583121210e912a230ceaad3ed</sys_scope>
        <sys_update_name>sys_script_client_6bc8900b83161210e912a230ceaad3a1</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-12-12 07:55:58</sys_updated_on>
        <table>x_1557802_feedba_1_feedback_data</table>
        <type>onSubmit</type>
        <ui_type>10</ui_type>
        <view/>
    </sys_script_client>
</record_update>
